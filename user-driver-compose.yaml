# version: "3.9"

# networks:
#   app-net:
#     driver: bridge

# services:
#   driver-service:
#     build:
#       context: .
#       dockerfile: driver-service/Dockerfile
#     container_name: driver-service
#     ports:
#       - "8082:8082"  # REST
#       - "28082:28082"  # gRPC
#     environment:
#       - ASPNETCORE_ENVIRONMENT=Development
#     depends_on:
#       - mssql
#     networks:
#       - app-net

#   user-service:
#     build:
#       context: .
#       dockerfile: user-service/Dockerfile
#     container_name: user-service
#     ports:
#       - "8080:8080"
#     environment:
#       - ASPNETCORE_ENVIRONMENT=Development
#       - ASPNETCORE_URLS=http://0.0.0.0:8080
#     depends_on:
#       - driver-service
#       - mssql
#     networks:
#       - app-net

#   mssql:
#     image: mcr.microsoft.com/mssql/server:2022-latest
#     container_name: mssql
#     environment:
#       - ACCEPT_EULA=Y
#       - SA_PASSWORD=YourStrong@Passw0rd
#     ports:
#       - "1433:1433"
#     restart: unless-stopped
#     networks:
#       - app-net
#     healthcheck:
#       test: ["CMD", "/opt/mssql-tools/bin/sqlcmd", "-S", "localhost", "-U", "sa", "-P", "YourStrong@Passw0rd", "-Q", "SELECT 1"]
#       interval: 10s
#       timeout: 5s
#       retries: 12
#     volumes:
#       - mssql-data:/var/opt/mssql   # <-- đây là named volume
#   redis:
#     image: redis:7
#     container_name: redis
#     ports:
#       - "6379:6379"
#     command: ["redis-server", "--save", "", "--appendonly", "no"]
#     restart: unless-stopped
#     networks:
#       - app-net

# volumes:
#   mssql-data:
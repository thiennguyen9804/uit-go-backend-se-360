version: "3.8"

include:
  - path: ./trip-service/docker-compose.yml

services:
  api-gateway:
    build:
      context: ./api-gateway
      dockerfile: Dockerfile
    ports:
      - "9000:9000"
    networks:
      - micro-network
    depends_on:
      - trip-service

  trip-service:
    build:
      context: ./trip-service
      dockerfile: Dockerfile
    ports:
      - "8081:8081"
    networks:
      - micro-network

  matching-service:
    build:
      context: ./matching-service
      dockerfile: Dockerfile
    ports:
      - "8083:8083"
    networks:
      - micro-network

  redis:
    image: redis:7.0-alpine
    container_name: redis
    ports:
      - "6379:6379"
    # volumes:
    # - redis-data:/data

networks:
  micro-network:
    driver: bridge
